'use strict';

var app = angular.module('Meaniscule', ['ui.router', 'ngDragDrop']);

app.config(function ($urlRouterProvider, $locationProvider) {
   // This turns off hashbang urls (/#about) and changes it to something normal (/about)
   $locationProvider.html5Mode(true);
   // If we go to a URL that ui-router doesn't have registered, go to the "/" url.
   $urlRouterProvider.otherwise('/');
});
'use strict';

app.directive('fsadraggable', ['$document', function ($document) {
	return {
		link: function link(scope, element, attr) {
			var startX = 0,
			    startY = 0,
			    newX = 0,
			    newY = 0;

			element.css({
				position: 'relative',
				cursor: 'pointer'
			});

			element.bind('drag', function () {
				console.log('drag');
			});

			element.on('mousedown', function (event) {
				event.preventDefault();
				startX = event.pageX - newX;
				startY = event.pageY - newY;
				$document.on('mousemove', dragMouseMove);
				$document.on('mouseup', dragMouseUp);
			});

			function dragMouseMove() {
				newX = event.pageX - startX;
				newY = event.pageY - startY;
				element.css({
					left: newX + 'px',
					top: newY + 'px'
				});
			}

			function dragMouseUp() {
				$document.off('mousemove', dragMouseMove);
				$document.off('mouseup', dragMouseUp);
			}
			console.log(element);
		}
	};
}]);

app.directive('fsaresizeable', ['$document', function ($document) {
	return {
		link: function link(scope, element, attr) {
			var startHeight = element.context.offsetHeight;
			var startWidth = element.context.offsetWidth;
			var topBorder = element.context.offsetTop;
			var bottomBorder = element.context.offsetTop + startHeight;
			var leftBorder = element.context.offsetLeft;
			var rightBorder = element.context.offsetLeft + startWidth;
			var borderWidth = 10;

			element.css({
				position: 'relative'
			});

			element.on('mousedown', function (event) {
				// console.log(attr)
				event.preventDefault();

				if (event.pageX < rightBorder + borderWidth && event.pageX > rightBorder - borderWidth || event.pageY < bottomBorder + borderWidth && event.pageY > bottomBorder - borderWidth) {
					$document.on('mousemove', sizeMouseMove);
					$document.on('mouseup', sizeMouseUp);
				}
			});
			function sizeMouseMove() {
				var newHeight = event.pageY - topBorder;
				var newWidth = event.pageX - leftBorder;
				bottomBorder = topBorder + newHeight;
				rightBorder = leftBorder + newWidth;
				element.css({
					height: newHeight + 'px',
					width: newWidth + 'px'
				});
			}

			function sizeMouseUp() {
				$document.off('mousemove', sizeMouseMove);
				$document.off('mouseup', sizeMouseUp);
			}
		}
	};
}]);

app.directive('fsacontainer', ['$document', function ($document) {
	return {
		link: function link(scope, element, attr) {
			// element[0].draggable = true
			element.bind('dragover', function (e) {
				e.preventDefault();
				console.log('e', e);
			});

			/* if mouseenter:
   lookup:
   drop event
   drop end
   	-send data
   check to see if fsadraggable is on the div that is being dragged in*/
		}
	};
}]);
// cursor: 'pointer'
'use strict';

app.controller('HomeController', function ($scope, $timeout, $http) {

  $scope.msgFromScope = '...And I\'m a message from the HomeController scope, just so you know that I work!';

  $scope.list1 = [];
  $scope.list2 = [];
  $scope.list3 = [];
  $scope.list4 = [];

  $scope.list5 = [{ 'title': 'Item 1', 'drag': true }, { 'title': 'Item 2', 'drag': true }, { 'title': 'Item 3', 'drag': true }, { 'title': 'Item 4', 'drag': true }, { 'title': 'Item 5', 'drag': true }, { 'title': 'Item 6', 'drag': true }, { 'title': 'Item 7', 'drag': true }, { 'title': 'Item 8', 'drag': true }];

  // Limit items to be dropped in list1
  $scope.optionsList1 = {
    accept: function accept(dragEl) {
      if ($scope.list1.length >= 2) {
        return false;
      } else {
        return true;
      }
    }
  };
});
'use strict';

app.config(function ($stateProvider) {
    $stateProvider.state('home', {
        url: '/',
        templateUrl: '/app/home/home.html',
        controller: 'HomeController'
    });
});
'use strict';

app.controller('ModulesController', function ($scope, $http, ModulesFactory) {

  $scope.$on('$stateChangeSuccess', function () {
    var defaultMessage = 'If you don\'t see a list of links here, you need to seed your database!\nIn your terminal, go to this app\'s directory and run `gulp seedDB`.\nThen try this page again.';

    ModulesFactory.getNodeModules().then(function (modules) {
      $scope.nodeModules = modules;

      if (!$scope.nodeModules.length) {
        $scope.defaultMessage = defaultMessage;
      }
    });
  });
});
'use strict';

app.factory('ModulesFactory', function ($http) {
  return {
    getNodeModules: function getNodeModules() {
      return $http.get('/api/modules/').then(function (res) {
        return res.data;
      });
    }
  };
});
'use strict';

app.config(function ($stateProvider) {
    $stateProvider.state('modules', {
        url: '/modules',
        templateUrl: '/app/modules/modules.html',
        controller: 'ModulesController'
    });
});
"use strict";

app.directive("navbar", function () {
	return {
		restrict: "E",
		templateUrl: "/app/navbar/navbar.html"
	};
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImhvbWUvZHJhZ2RpcmVjdGl2ZS5qcyIsImhvbWUvaG9tZS5jb250cm9sbGVyLmpzIiwiaG9tZS9ob21lLnN0YXRlLmpzIiwibW9kdWxlcy9tb2R1bGVzLmNvbnRyb2xsZXIuanMiLCJtb2R1bGVzL21vZHVsZXMuZmFjdG9yeS5qcyIsIm1vZHVsZXMvbW9kdWxlcy5zdGF0ZS5qcyIsIm5hdmJhci9uYXZiYXIuZGlyZWN0aXZlLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBSSxHQUFHLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQyxZQUFZLEVBQUUsQ0FBQyxXQUFXLEVBQUUsWUFBWSxDQUFDLENBQUMsQ0FBQzs7QUFFcEUsR0FBRyxDQUFDLE1BQU0sQ0FBQyxVQUFVLGtCQUFrQixFQUFFLGlCQUFpQixFQUFFOztBQUV6RCxvQkFBaUIsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUM7O0FBRWxDLHFCQUFrQixDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQztDQUNwQyxDQUFDLENBQUM7OztBQ1BILEdBQUcsQ0FBQyxTQUFTLENBQUMsY0FBYyxFQUFFLENBQUMsV0FBVyxFQUFFLFVBQVUsU0FBUyxFQUFFO0FBQ2hFLFFBQU87QUFDTixNQUFJLEVBQUUsY0FBVSxLQUFLLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRTtBQUNyQyxPQUFJLE1BQU0sR0FBRyxDQUFDO09BQUUsTUFBTSxHQUFHLENBQUM7T0FBRSxJQUFJLEdBQUcsQ0FBQztPQUFFLElBQUksR0FBRyxDQUFDLENBQUE7O0FBRTlDLFVBQU8sQ0FBQyxHQUFHLENBQUM7QUFDWCxZQUFRLEVBQUUsVUFBVTtBQUNwQixVQUFNLEVBQUUsU0FBUztJQUNqQixDQUFDLENBQUE7O0FBRUYsVUFBTyxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsWUFBWTtBQUNoQyxXQUFPLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxDQUFBO0lBQ25CLENBQUMsQ0FBQTs7QUFFRixV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QUMscUJBQXFCLEVBQUUsWUFBWTtBQUM1QyxRQUFJLGNBQWMsR0FBRywwS0FBMEssQ0FBQzs7QUFFaE0sa0JBQWMsQ0FBQyxjQUFjLEVBQUUsQ0FDNUIsSUFBSSxDQUFDLFVBQVMsT0FBTyxFQUFFO0FBQ3RCLFlBQU0sQ0FBQyxXQUFXLEdBQUcsT0FBTyxDQUFDOztBQUU3QixVQUFJLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxNQUFNLEVBQUU7QUFDOUIsY0FBTSxDQUFDLGNBQWMsR0FBRyxjQUFjLENBQUM7T0FDeEM7S0FDRixDQUFDLENBQUM7R0FDTixDQUFDLENBQUM7Q0FDSixDQUFDLENBQUM7OztBQ2RILEdBQUcsQ0FBQyxPQUFPLENBQUMsZ0JBQWdCLEVBQUUsVUFBUyxLQUFLLEVBQUU7QUFDNUMsU0FBTztBQUNMLGtCQUFjLEVBQUUsMEJBQVc7QUFDekIsYUFBTyxLQUFLLENBQUMsR0FBRyxDQUFDLGVBQWUsQ0FBQyxDQUM5QixJQUFJLENBQUMsVUFBUyxHQUFHLEVBQUU7QUFDbEIsZUFBTyxHQUFHLENBQUMsSUFBSSxDQUFDO09BQ2pCLENBQUMsQ0FBQztLQUNOO0dBQ0YsQ0FBQztDQUNILENBQUMsQ0FBQzs7O0FDVEgsR0FBRyxDQUFDLE1BQU0sQ0FBQyxVQUFVLGNBQWMsRUFBRTtBQUNqQyxrQkFBYyxDQUFDLEtBQUssQ0FBQyxTQUFTLEVBQUU7QUFDNUIsV0FBRyxFQUFFLFVBQVU7QUFDZixtQkFBVyxFQUFFLDJCQUEyQjtBQUN4QyxrQkFBVSxFQUFFLG1CQUFtQjtLQUNsQyxDQUFDLENBQUM7Q0FDTixDQUFDLENBQUM7OztBQ05ILEdBQUcsQ0FBQyxTQUFTLENBQUMsUUFBUSxFQUFFLFlBQVU7QUFDakMsUUFBTztBQUNOLFVBQVEsRUFBRSxHQUFHO0FBQ2IsYUFBVyxFQUFFLHlCQUF5QjtFQUN0QyxDQUFDO0NBQ0YsQ0FBQyxDQUFDIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ01lYW5pc2N1bGUnLCBbJ3VpLnJvdXRlcicsICduZ0RyYWdEcm9wJ10pO1xuXG5hcHAuY29uZmlnKGZ1bmN0aW9uICgkdXJsUm91dGVyUHJvdmlkZXIsICRsb2NhdGlvblByb3ZpZGVyKSB7XG4gICAvLyBUaGlzIHR1cm5zIG9mZiBoYXNoYmFuZyB1cmxzICgvI2Fib3V0KSBhbmQgY2hhbmdlcyBpdCB0byBzb21ldGhpbmcgbm9ybWFsICgvYWJvdXQpXG4gICAkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUodHJ1ZSk7XG4gICAvLyBJZiB3ZSBnbyB0byBhIFVSTCB0aGF0IHVpLXJvdXRlciBkb2Vzbid0IGhhdmUgcmVnaXN0ZXJlZCwgZ28gdG8gdGhlIFwiL1wiIHVybC5cbiAgICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoJy8nKTtcbn0pOyIsImFwcC5kaXJlY3RpdmUoJ2ZzYWRyYWdnYWJsZScsIFsnJGRvY3VtZW50JywgZnVuY3Rpb24gKCRkb2N1bWVudCkge1xuXHRyZXR1cm4ge1xuXHRcdGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbWVudCwgYXR0cikge1xuXHRcdFx0dmFyIHN0YXJ0WCA9IDAsIHN0YXJ0WSA9IDAsIG5ld1ggPSAwLCBuZXdZID0gMFxuXG5cdFx0XHRlbGVtZW50LmNzcyh7XG5cdFx0XHRcdHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuXHRcdFx0XHRjdXJzb3I6ICdwb2ludGVyJ1xuXHRcdFx0fSlcblxuXHRcdFx0ZWxlbWVudC5iaW5kKCdkcmFnJywgZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRjb25zb2xlLmxvZygnZHJhZycpXG5cdFx0XHR9KVxuXG5cdFx0XHRlbGVtZW50Lm9uKCdtb3VzZWRvd24nLCBmdW5jdGlvbiAoZXZlbnQpe1xuXHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cdFx0XHRcdHN0YXJ0WCA9IGV2ZW50LnBhZ2VYIC0gbmV3WFxuXHRcdFx0XHRzdGFydFkgPSBldmVudC5wYWdlWSAtIG5ld1lcblx0XHRcdFx0JGRvY3VtZW50Lm9uKCdtb3VzZW1vdmUnLCBkcmFnTW91c2VNb3ZlKVxuXHRcdFx0XHQkZG9jdW1lbnQub24oJ21vdXNldXAnLCBkcmFnTW91c2VVcClcblx0XHRcdH0pXG5cblx0XHRcdGZ1bmN0aW9uIGRyYWdNb3VzZU1vdmUgKCkge1xuXHRcdFx0XHRuZXdYID0gZXZlbnQucGFnZVggLSBzdGFydFhcblx0XHRcdFx0bmV3WSA9IGV2ZW50LnBhZ2VZIC0gc3RhcnRZXG5cdFx0XHRcdGVsZW1lbnQuY3NzKHtcblx0XHRcdFx0XHRsZWZ0OiBuZXdYICsgJ3B4Jyxcblx0XHRcdFx0XHR0b3A6IG5ld1kgKyAncHgnXG5cdFx0XHRcdH0pXG5cdFx0XHR9XG5cblx0XHRcdGZ1bmN0aW9uIGRyYWdNb3VzZVVwICgpIHtcblx0XHRcdFx0JGRvY3VtZW50Lm9mZignbW91c2Vtb3ZlJywgZHJhZ01vdXNlTW92ZSlcblx0XHRcdFx0JGRvY3VtZW50Lm9mZignbW91c2V1cCcsIGRyYWdNb3VzZVVwKTtcblx0XHRcdH1cblx0XHRcdGNvbnNvbGUubG9nKGVsZW1lbnQpXG5cdFx0fVxuXHR9XG59XSlcblxuYXBwLmRpcmVjdGl2ZSgnZnNhcmVzaXplYWJsZScsIFsnJGRvY3VtZW50JywgZnVuY3Rpb24gKCRkb2N1bWVudCkge1xuXHRyZXR1cm4ge1xuXHRcdGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbWVudCwgYXR0cikge1xuXHRcdFx0dmFyIHN0YXJ0SGVpZ2h0ID0gZWxlbWVudC5jb250ZXh0Lm9mZnNldEhlaWdodFxuXHRcdFx0dmFyIHN0YXJ0V2lkdGggPSBlbGVtZW50LmNvbnRleHQub2Zmc2V0V2lkdGhcblx0XHRcdHZhciB0b3BCb3JkZXIgPSBlbGVtZW50LmNvbnRleHQub2Zmc2V0VG9wXG5cdFx0XHR2YXJcdGJvdHRvbUJvcmRlciA9IGVsZW1lbnQuY29udGV4dC5vZmZzZXRUb3AgKyBzdGFydEhlaWdodFxuXHRcdFx0dmFyIGxlZnRCb3JkZXIgPSBlbGVtZW50LmNvbnRleHQub2Zmc2V0TGVmdCBcblx0XHRcdHZhciByaWdodEJvcmRlciA9IGVsZW1lbnQuY29udGV4dC5vZmZzZXRMZWZ0ICsgc3RhcnRXaWR0aFxuXHRcdFx0dmFyIGJvcmRlcldpZHRoID0gMTBcblxuXHRcdFx0ZWxlbWVudC5jc3Moe1xuXHRcdFx0XHRwb3NpdGlvbjogJ3JlbGF0aXZlJyxcblx0XHRcdFx0Ly8gY3Vyc29yOiAncG9pbnRlcidcblx0XHRcdH0pXG5cblx0XHRcdGVsZW1lbnQub24oJ21vdXNlZG93bicsIGZ1bmN0aW9uIChldmVudCkge1xuXHRcdFx0XHQvLyBjb25zb2xlLmxvZyhhdHRyKVxuXHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cblx0XHRcdFx0aWYgKGV2ZW50LnBhZ2VYIDwgcmlnaHRCb3JkZXIgKyBib3JkZXJXaWR0aCAmJiBldmVudC5wYWdlWCA+IHJpZ2h0Qm9yZGVyIC0gYm9yZGVyV2lkdGggfHxcblx0XHRcdFx0XHRldmVudC5wYWdlWSA8IGJvdHRvbUJvcmRlciArIGJvcmRlcldpZHRoICYmIGV2ZW50LnBhZ2VZID4gYm90dG9tQm9yZGVyIC0gYm9yZGVyV2lkdGgpIHtcblx0XHRcdFx0XHQkZG9jdW1lbnQub24oJ21vdXNlbW92ZScsIHNpemVNb3VzZU1vdmUpXG5cdFx0XHRcdFx0JGRvY3VtZW50Lm9uKCdtb3VzZXVwJywgc2l6ZU1vdXNlVXApXG5cdFx0XHRcdH1cdFx0XHRcdFxuXHRcdFx0fSlcblx0XHRcdGZ1bmN0aW9uIHNpemVNb3VzZU1vdmUgKCkge1xuXHRcdFx0XHR2YXIgbmV3SGVpZ2h0ID0gZXZlbnQucGFnZVkgLSB0b3BCb3JkZXJcblx0XHRcdFx0dmFyIG5ld1dpZHRoID0gZXZlbnQucGFnZVggLSBsZWZ0Qm9yZGVyXG5cdFx0XHRcdGJvdHRvbUJvcmRlciA9IHRvcEJvcmRlciArIG5ld0hlaWdodFxuXHRcdFx0XHRyaWdodEJvcmRlciA9IGxlZnRCb3JkZXIgKyBuZXdXaWR0aFxuXHRcdFx0XHRlbGVtZW50LmNzcyh7XG5cdFx0XHRcdFx0aGVpZ2h0OiBuZXdIZWlnaHQgKyAncHgnLFxuXHRcdFx0XHRcdHdpZHRoOiBuZXdXaWR0aCArICdweCdcblx0XHRcdFx0fSlcblx0XHRcdH1cblxuXHRcdFx0ZnVuY3Rpb24gc2l6ZU1vdXNlVXAgKCkge1xuXHRcdFx0XHQkZG9jdW1lbnQub2ZmKCdtb3VzZW1vdmUnLCBzaXplTW91c2VNb3ZlKVxuXHRcdFx0XHQkZG9jdW1lbnQub2ZmKCdtb3VzZXVwJywgc2l6ZU1vdXNlVXApO1xuXHRcdFx0fVxuXG5cdFx0fVxuXHR9XG59XSlcblxuYXBwLmRpcmVjdGl2ZSgnZnNhY29udGFpbmVyJywgWyckZG9jdW1lbnQnLCBmdW5jdGlvbiAoJGRvY3VtZW50KSB7XG5cdHJldHVybiB7XG5cdFx0bGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRyKSB7XG5cdFx0XHQvLyBlbGVtZW50WzBdLmRyYWdnYWJsZSA9IHRydWVcblx0XHRcdGVsZW1lbnQuYmluZCgnZHJhZ292ZXInLCBmdW5jdGlvbihlKSB7XG5cdFx0XHRcdGUucHJldmVudERlZmF1bHQoKVxuICAgICAgICAgICAgXHRjb25zb2xlLmxvZygnZScsIGUpXG4gICAgICAgICBcdH0pO1xuXG5cdFx0XHQvKiBpZiBtb3VzZWVudGVyOlxuXHRcdFx0bG9va3VwOlxuXHRcdFx0ZHJvcCBldmVudFxuXHRcdFx0ZHJvcCBlbmRcblx0XHRcdFx0LXNlbmQgZGF0YVxuXHRcdFx0Y2hlY2sgdG8gc2VlIGlmIGZzYWRyYWdnYWJsZSBpcyBvbiB0aGUgZGl2IHRoYXQgaXMgYmVpbmcgZHJhZ2dlZCBpbiovXG5cdFx0fVxuXHR9XG59XSlcbiIsImFwcC5jb250cm9sbGVyKCdIb21lQ29udHJvbGxlcicsIGZ1bmN0aW9uKCRzY29wZSwgJHRpbWVvdXQsICRodHRwKSB7XG4gIFxuICAkc2NvcGUubXNnRnJvbVNjb3BlID0gXCIuLi5BbmQgSSdtIGEgbWVzc2FnZSBmcm9tIHRoZSBIb21lQ29udHJvbGxlciBzY29wZSwganVzdCBzbyB5b3Uga25vdyB0aGF0IEkgd29yayFcIjtcblxuICAkc2NvcGUubGlzdDEgPSBbXTtcbiAgJHNjb3BlLmxpc3QyID0gW107XG4gICRzY29wZS5saXN0MyA9IFtdO1xuICAkc2NvcGUubGlzdDQgPSBbXTtcbiAgXG4gICRzY29wZS5saXN0NSA9IFtcbiAgICB7ICd0aXRsZSc6ICdJdGVtIDEnLCAnZHJhZyc6IHRydWUgfSxcbiAgICB7ICd0aXRsZSc6ICdJdGVtIDInLCAnZHJhZyc6IHRydWUgfSxcbiAgICB7ICd0aXRsZSc6ICdJdGVtIDMnLCAnZHJhZyc6IHRydWUgfSxcbiAgICB7ICd0aXRsZSc6ICdJdGVtIDQnLCAnZHJhZyc6IHRydWUgfSxcbiAgICB7ICd0aXRsZSc6ICdJdGVtIDUnLCAnZHJhZyc6IHRydWUgfSxcbiAgICB7ICd0aXRsZSc6ICdJdGVtIDYnLCAnZHJhZyc6IHRydWUgfSxcbiAgICB7ICd0aXRsZSc6ICdJdGVtIDcnLCAnZHJhZyc6IHRydWUgfSxcbiAgICB7ICd0aXRsZSc6ICdJdGVtIDgnLCAnZHJhZyc6IHRydWUgfVxuICBdO1xuXG4gIC8vIExpbWl0IGl0ZW1zIHRvIGJlIGRyb3BwZWQgaW4gbGlzdDFcbiAgJHNjb3BlLm9wdGlvbnNMaXN0MSA9IHtcbiAgICBhY2NlcHQ6IGZ1bmN0aW9uKGRyYWdFbCkge1xuICAgICAgaWYgKCRzY29wZS5saXN0MS5sZW5ndGggPj0gMikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbn0pOyIsImFwcC5jb25maWcoZnVuY3Rpb24gKCRzdGF0ZVByb3ZpZGVyKSB7XG4gICAgJHN0YXRlUHJvdmlkZXIuc3RhdGUoJ2hvbWUnLCB7XG4gICAgICAgIHVybDogJy8nLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJy9hcHAvaG9tZS9ob21lLmh0bWwnLFxuICAgICAgICBjb250cm9sbGVyOiAnSG9tZUNvbnRyb2xsZXInXG4gICAgfSk7XG59KTsiLCJhcHAuY29udHJvbGxlcignTW9kdWxlc0NvbnRyb2xsZXInLCBmdW5jdGlvbigkc2NvcGUsICRodHRwLCBNb2R1bGVzRmFjdG9yeSkge1xuICBcbiAgJHNjb3BlLiRvbignJHN0YXRlQ2hhbmdlU3VjY2VzcycsIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZGVmYXVsdE1lc3NhZ2UgPSAnSWYgeW91IGRvblxcJ3Qgc2VlIGEgbGlzdCBvZiBsaW5rcyBoZXJlLCB5b3UgbmVlZCB0byBzZWVkIHlvdXIgZGF0YWJhc2UhXFxuSW4geW91ciB0ZXJtaW5hbCwgZ28gdG8gdGhpcyBhcHBcXCdzIGRpcmVjdG9yeSBhbmQgcnVuIGBndWxwIHNlZWREQmAuXFxuVGhlbiB0cnkgdGhpcyBwYWdlIGFnYWluLic7XG5cbiAgICBNb2R1bGVzRmFjdG9yeS5nZXROb2RlTW9kdWxlcygpXG4gICAgICAudGhlbihmdW5jdGlvbihtb2R1bGVzKSB7XG4gICAgICAgICRzY29wZS5ub2RlTW9kdWxlcyA9IG1vZHVsZXM7XG4gICAgICAgIFxuICAgICAgICBpZiAoISRzY29wZS5ub2RlTW9kdWxlcy5sZW5ndGgpIHtcbiAgICAgICAgICAkc2NvcGUuZGVmYXVsdE1lc3NhZ2UgPSBkZWZhdWx0TWVzc2FnZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH0pO1xufSk7IiwiYXBwLmZhY3RvcnkoJ01vZHVsZXNGYWN0b3J5JywgZnVuY3Rpb24oJGh0dHApIHtcbiAgcmV0dXJuIHtcbiAgICBnZXROb2RlTW9kdWxlczogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL21vZHVsZXMvJylcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5kYXRhO1xuICAgICAgICB9KTsgICAgXG4gICAgfVxuICB9O1xufSk7IiwiYXBwLmNvbmZpZyhmdW5jdGlvbiAoJHN0YXRlUHJvdmlkZXIpIHtcbiAgICAkc3RhdGVQcm92aWRlci5zdGF0ZSgnbW9kdWxlcycsIHtcbiAgICAgICAgdXJsOiAnL21vZHVsZXMnLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJy9hcHAvbW9kdWxlcy9tb2R1bGVzLmh0bWwnLFxuICAgICAgICBjb250cm9sbGVyOiAnTW9kdWxlc0NvbnRyb2xsZXInXG4gICAgfSk7XG59KTsiLCJhcHAuZGlyZWN0aXZlKFwibmF2YmFyXCIsIGZ1bmN0aW9uKCl7XG5cdHJldHVybiB7XG5cdFx0cmVzdHJpY3Q6IFwiRVwiLFxuXHRcdHRlbXBsYXRlVXJsOiBcIi9hcHAvbmF2YmFyL25hdmJhci5odG1sXCJcblx0fTtcbn0pOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==