'use strict';

var app = angular.module('Meaniscule', ['ui.router', 'ngDragDrop']);

app.config(function ($urlRouterProvider, $locationProvider) {
   // This turns off hashbang urls (/#about) and changes it to something normal (/about)
   $locationProvider.html5Mode(true);
   // If we go to a URL that ui-router doesn't have registered, go to the "/" url.
   $urlRouterProvider.otherwise('/');
});
'use strict';

app.controller('ModulesController', function ($scope, $http, ModulesFactory) {

  $scope.$on('$stateChangeSuccess', function () {
    var defaultMessage = 'If you don\'t see a list of links here, you need to seed your database!\nIn your terminal, go to this app\'s directory and run `gulp seedDB`.\nThen try this page again.';

    ModulesFactory.getNodeModules().then(function (modules) {
      $scope.nodeModules = modules;

      if (!$scope.nodeModules.length) {
        $scope.defaultMessage = defaultMessage;
      }
    });
  });
});
'use strict';

app.factory('ModulesFactory', function ($http) {
  return {
    getNodeModules: function getNodeModules() {
      return $http.get('/api/modules/').then(function (res) {
        return res.data;
      });
    }
  };
});
'use strict';

app.config(function ($stateProvider) {
    $stateProvider.state('modules', {
        url: '/modules',
        templateUrl: '/app/modules/modules.html',
        controller: 'ModulesController'
    });
});
'use strict';

app.directive('fsadraggable', ['$document', function ($document) {
	return {
		link: function link(scope, element, attr) {
			var startX = 0,
			    startY = 0,
			    newX = 0,
			    newY = 0;

			var data = {
				test: 'test'
			};

			data = JSON.stringify(data);

			element.css({
				position: 'relative',
				cursor: 'pointer'
			});

			element[0].draggable = true;

			element.bind('dragstart', function (event) {
				startX = event.originalEvent.pageX - newX;
				startY = event.originalEvent.pageY - newY;

				event.originalEvent.dataTransfer.setData('auto', data);
			});

			element.bind('drag', function (event) {

				if (event.originalEvent.pageX === 0) {
					// If this isn't here, pageX will reset to 0 upon end of drag
					return;
				}

				newX = event.originalEvent.pageX - startX;
				newY = event.originalEvent.pageY - startY;
			});

			element.bind('dragend', function (event) {
				element.css({
					left: newX + 'px',
					top: newY + 'px'
				});
			});
		}
	};
}]);

app.directive('fsaresizeable', ['$document', function ($document) {
	return {
		link: function link(scope, element, attr) {
			var startHeight = element[0].offsetHeight;
			var startWidth = element[0].offsetWidth;
			var topBorder = element[0].offsetTop;
			var bottomBorder = element[0].offsetTop + startHeight;
			var leftBorder = element[0].offsetLeft;
			var rightBorder = element[0].offsetLeft + startWidth;
			var borderWidth = 10;

			element.css({
				position: 'relative'
			});

			element.on('mousedown', function (event) {
				// console.log(attr)
				event.preventDefault();

				if (event.pageX < rightBorder + borderWidth && event.pageX > rightBorder - borderWidth || event.pageY < bottomBorder + borderWidth && event.pageY > bottomBorder - borderWidth) {
					$document.on('mousemove', sizeMouseMove);
					$document.on('mouseup', sizeMouseUp);
				}
			});
			function sizeMouseMove() {
				var newHeight = event.pageY - topBorder;
				var newWidth = event.pageX - leftBorder;
				bottomBorder = topBorder + newHeight;
				rightBorder = leftBorder + newWidth;
				element.css({
					height: newHeight + 'px',
					width: newWidth + 'px'
				});
			}

			function sizeMouseUp() {
				$document.off('mousemove', sizeMouseMove);
				$document.off('mouseup', sizeMouseUp);
			}
		}
	};
}]);

app.directive('fsacontainer', ['$document', function ($document) {
	return {
		link: function link(scope, element, attr) {
			var data;
			element.bind('dragover', function (e) {
				e.preventDefault();
			});

			element.bind('drop', function (event) {
				data = JSON.parse(event.originalEvent.dataTransfer.getData('auto'));
				console.log(data);
			});
		}
	};
}]);
// cursor: 'pointer'
'use strict';

app.controller('HomeController', function ($scope, $timeout, $http) {

  $scope.msgFromScope = '...And I\'m a message from the HomeController scope, just so you know that I work!';

  $scope.list1 = [];
  $scope.list2 = [];
  $scope.list3 = [];
  $scope.list4 = [];

  $scope.list5 = [{ 'title': 'Item 1', 'drag': true }, { 'title': 'Item 2', 'drag': true }, { 'title': 'Item 3', 'drag': true }, { 'title': 'Item 4', 'drag': true }, { 'title': 'Item 5', 'drag': true }, { 'title': 'Item 6', 'drag': true }, { 'title': 'Item 7', 'drag': true }, { 'title': 'Item 8', 'drag': true }];

  // Limit items to be dropped in list1
  $scope.optionsList1 = {
    accept: function accept(dragEl) {
      if ($scope.list1.length >= 2) {
        return false;
      } else {
        return true;
      }
    }
  };
});
'use strict';

app.config(function ($stateProvider) {
    $stateProvider.state('home', {
        url: '/',
        templateUrl: '/app/home/home.html',
        controller: 'HomeController'
    });
});
"use strict";

app.directive("navbar", function () {
	return {
		restrict: "E",
		templateUrl: "/app/navbar/navbar.html"
	};
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsIm1vZHVsZXMvbW9kdWxlcy5jb250cm9sbGVyLmpzIiwibW9kdWxlcy9tb2R1bGVzLmZhY3RvcnkuanMiLCJtb2R1bGVzL21vZHVsZXMuc3RhdGUuanMiLCJob21lL2RyYWdkaXJlY3RpdmUuanMiLCJob21lL2hvbWUuY29udHJvbGxlci5qcyIsImhvbWUvaG9tZS5zdGF0ZS5qcyIsIm5hdmJhci9uYXZiYXIuZGlyZWN0aXZlLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBSSxHQUFHLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQyxZQUFZLEVBQUUsQ0FBQyxXQUFXLEVBQUUsWUFBWSxDQUFDLENBQUMsQ0FBQzs7QUFFcEUsR0FBRyxDQUFDLE1BQU0sQ0FBQyxVQUFVLGtCQUFrQixFQUFFLGlCQUFpQixFQUFFOztBQUV6RCxvQkFBaUIsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUM7O0FBRWxDLHFCQUFrQixDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQztDQUNwQyxDQUFDLENBQUM7OztBQ1BILEdBQUcsQ0FBQyxVQUFVLENBQUMsbUJBQW1CLEVBQUUsVUFBUyxNQUFNLEVBQUUsS0FBSyxFQUFFLGNBQWMsRUFBRTs7QUFFMUUsUUFBTSxDQUFDLEdBQUcsQ0FBQyxxQkFBcUIsRUFBRSxZQUFZO0FBQzVDLFFBQUksY0FBYyxHQUFHLDBLQUEwSyxDQUFDOztBQUVoTSxrQkFBYyxDQUFDLGNBQWMsRUFBRSxDQUM1QixJQUFJLENBQUMsVUFBUyxPQUFPLEVBQUU7QUFDdEIsWUFBTSxDQUFDLFdBQVcsR0FBRyxPQUFPLENBQUM7O0FBRTdCLFVBQUksQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLE1BQU0sRUFBRTtBQUM5QixjQUFNLENBQUMsY0FBYyxHQUFHLGNBQWMsQ0FBQztPQUN4QztLQUNGLENBQUMsQ0FBQztHQUNOLENBQUMsQ0FBQztDQUNKLENBQUMsQ0FBQzs7O0FDZEgsR0FBRyxDQUFDLE9BQU8sQ0FBQyxn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QjtLQUMvQixDQUFDLENBQUM7Q0FDTixDQUFDLENBQUM7OztBQ05ILEdBQUcsQ0FBQyxTQUFTLENBQUMsUUFBUSxFQUFFLFlBQVU7QUFDakMsUUFBTztBQUNOLFVBQVEsRUFBRSxHQUFHO0FBQ2IsYUFBVyxFQUFFLHlCQUF5QjtFQUN0QyxDQUFDO0NBQ0YsQ0FBQyxDQUFDIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ01lYW5pc2N1bGUnLCBbJ3VpLnJvdXRlcicsICduZ0RyYWdEcm9wJ10pO1xuXG5hcHAuY29uZmlnKGZ1bmN0aW9uICgkdXJsUm91dGVyUHJvdmlkZXIsICRsb2NhdGlvblByb3ZpZGVyKSB7XG4gICAvLyBUaGlzIHR1cm5zIG9mZiBoYXNoYmFuZyB1cmxzICgvI2Fib3V0KSBhbmQgY2hhbmdlcyBpdCB0byBzb21ldGhpbmcgbm9ybWFsICgvYWJvdXQpXG4gICAkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUodHJ1ZSk7XG4gICAvLyBJZiB3ZSBnbyB0byBhIFVSTCB0aGF0IHVpLXJvdXRlciBkb2Vzbid0IGhhdmUgcmVnaXN0ZXJlZCwgZ28gdG8gdGhlIFwiL1wiIHVybC5cbiAgICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoJy8nKTtcbn0pOyIsImFwcC5jb250cm9sbGVyKCdNb2R1bGVzQ29udHJvbGxlcicsIGZ1bmN0aW9uKCRzY29wZSwgJGh0dHAsIE1vZHVsZXNGYWN0b3J5KSB7XG4gIFxuICAkc2NvcGUuJG9uKCckc3RhdGVDaGFuZ2VTdWNjZXNzJywgZnVuY3Rpb24gKCkge1xuICAgIHZhciBkZWZhdWx0TWVzc2FnZSA9ICdJZiB5b3UgZG9uXFwndCBzZWUgYSBsaXN0IG9mIGxpbmtzIGhlcmUsIHlvdSBuZWVkIHRvIHNlZWQgeW91ciBkYXRhYmFzZSFcXG5JbiB5b3VyIHRlcm1pbmFsLCBnbyB0byB0aGlzIGFwcFxcJ3MgZGlyZWN0b3J5IGFuZCBydW4gYGd1bHAgc2VlZERCYC5cXG5UaGVuIHRyeSB0aGlzIHBhZ2UgYWdhaW4uJztcblxuICAgIE1vZHVsZXNGYWN0b3J5LmdldE5vZGVNb2R1bGVzKClcbiAgICAgIC50aGVuKGZ1bmN0aW9uKG1vZHVsZXMpIHtcbiAgICAgICAgJHNjb3BlLm5vZGVNb2R1bGVzID0gbW9kdWxlcztcbiAgICAgICAgXG4gICAgICAgIGlmICghJHNjb3BlLm5vZGVNb2R1bGVzLmxlbmd0aCkge1xuICAgICAgICAgICRzY29wZS5kZWZhdWx0TWVzc2FnZSA9IGRlZmF1bHRNZXNzYWdlO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgfSk7XG59KTsiLCJhcHAuZmFjdG9yeSgnTW9kdWxlc0ZhY3RvcnknLCBmdW5jdGlvbigkaHR0cCkge1xuICByZXR1cm4ge1xuICAgIGdldE5vZGVNb2R1bGVzOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvbW9kdWxlcy8nKVxuICAgICAgICAudGhlbihmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgICByZXR1cm4gcmVzLmRhdGE7XG4gICAgICAgIH0pOyAgICBcbiAgICB9XG4gIH07XG59KTsiLCJhcHAuY29uZmlnKGZ1bmN0aW9uICgkc3RhdGVQcm92aWRlcikge1xuICAgICRzdGF0ZVByb3ZpZGVyLnN0YXRlKCdtb2R1bGVzJywge1xuICAgICAgICB1cmw6ICcvbW9kdWxlcycsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnL2FwcC9tb2R1bGVzL21vZHVsZXMuaHRtbCcsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdNb2R1bGVzQ29udHJvbGxlcidcbiAgICB9KTtcbn0pOyIsImFwcC5kaXJlY3RpdmUoJ2ZzYWRyYWdnYWJsZScsIFsnJGRvY3VtZW50JywgZnVuY3Rpb24gKCRkb2N1bWVudCkge1xuXHRyZXR1cm4ge1xuXHRcdGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbWVudCwgYXR0cikge1xuXHRcdFx0dmFyIHN0YXJ0WCA9IDAsIHN0YXJ0WSA9IDAsIG5ld1ggPSAwLCBuZXdZID0gMFxuXG5cdFx0XHR2YXIgZGF0YSA9IHtcblx0XHRcdFx0dGVzdDogJ3Rlc3QnXG5cdFx0XHR9XG5cblx0XHRcdGRhdGEgPSBKU09OLnN0cmluZ2lmeShkYXRhKVxuXG5cdFx0XHRlbGVtZW50LmNzcyh7XG5cdFx0XHRcdHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuXHRcdFx0XHRjdXJzb3I6ICdwb2ludGVyJ1xuXHRcdFx0fSlcblxuXHRcdFx0ZWxlbWVudFswXS5kcmFnZ2FibGUgPSB0cnVlXG5cblx0XHRcdGVsZW1lbnQuYmluZCgnZHJhZ3N0YXJ0JywgZnVuY3Rpb24gKGV2ZW50KSB7XG5cdFx0XHRcdHN0YXJ0WCA9IGV2ZW50Lm9yaWdpbmFsRXZlbnQucGFnZVggLSBuZXdYXG5cdFx0XHRcdHN0YXJ0WSA9IGV2ZW50Lm9yaWdpbmFsRXZlbnQucGFnZVkgLSBuZXdZXG5cblx0XHRcdFx0ZXZlbnQub3JpZ2luYWxFdmVudC5kYXRhVHJhbnNmZXIuc2V0RGF0YSgnYXV0bycsIGRhdGEpXG5cdFx0XHR9KVxuXG5cdFx0XHRlbGVtZW50LmJpbmQoJ2RyYWcnLCBmdW5jdGlvbiAoZXZlbnQpIHtcblxuXHRcdFx0XHRpZiAoZXZlbnQub3JpZ2luYWxFdmVudC5wYWdlWCA9PT0gMCkge1xuXHRcdFx0XHRcdC8vIElmIHRoaXMgaXNuJ3QgaGVyZSwgcGFnZVggd2lsbCByZXNldCB0byAwIHVwb24gZW5kIG9mIGRyYWdcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XHRcdFx0XG5cdFx0XHRcdG5ld1ggPSBldmVudC5vcmlnaW5hbEV2ZW50LnBhZ2VYIC0gc3RhcnRYXG5cdFx0XHRcdG5ld1kgPSBldmVudC5vcmlnaW5hbEV2ZW50LnBhZ2VZIC0gc3RhcnRZXG5cdFx0XHR9KVxuXG5cdFx0XHRlbGVtZW50LmJpbmQoJ2RyYWdlbmQnLCBmdW5jdGlvbiAoZXZlbnQpe1xuXHRcdFx0XHRlbGVtZW50LmNzcyh7XG5cdFx0XHRcdFx0bGVmdDogbmV3WCArICdweCcsXG5cdFx0XHRcdFx0dG9wOiBuZXdZICsgJ3B4J1xuXHRcdFx0XHR9KVxuXHRcdFx0fSlcblx0XHR9XG5cdH1cbn1dKVxuXG5hcHAuZGlyZWN0aXZlKCdmc2FyZXNpemVhYmxlJywgWyckZG9jdW1lbnQnLCBmdW5jdGlvbiAoJGRvY3VtZW50KSB7XG5cdHJldHVybiB7XG5cdFx0bGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRyKSB7XG5cdFx0XHR2YXIgc3RhcnRIZWlnaHQgPSBlbGVtZW50WzBdLm9mZnNldEhlaWdodFxuXHRcdFx0dmFyIHN0YXJ0V2lkdGggPSBlbGVtZW50WzBdLm9mZnNldFdpZHRoXG5cdFx0XHR2YXIgdG9wQm9yZGVyID0gZWxlbWVudFswXS5vZmZzZXRUb3Bcblx0XHRcdHZhclx0Ym90dG9tQm9yZGVyID0gZWxlbWVudFswXS5vZmZzZXRUb3AgKyBzdGFydEhlaWdodFxuXHRcdFx0dmFyIGxlZnRCb3JkZXIgPSBlbGVtZW50WzBdLm9mZnNldExlZnQgXG5cdFx0XHR2YXIgcmlnaHRCb3JkZXIgPSBlbGVtZW50WzBdLm9mZnNldExlZnQgKyBzdGFydFdpZHRoXG5cdFx0XHR2YXIgYm9yZGVyV2lkdGggPSAxMFxuXG5cdFx0XHRlbGVtZW50LmNzcyh7XG5cdFx0XHRcdHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuXHRcdFx0XHQvLyBjdXJzb3I6ICdwb2ludGVyJ1xuXHRcdFx0fSlcblxuXHRcdFx0ZWxlbWVudC5vbignbW91c2Vkb3duJywgZnVuY3Rpb24gKGV2ZW50KSB7XG5cdFx0XHRcdC8vIGNvbnNvbGUubG9nKGF0dHIpXG5cdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KClcblxuXHRcdFx0XHRpZiAoZXZlbnQucGFnZVggPCByaWdodEJvcmRlciArIGJvcmRlcldpZHRoICYmIGV2ZW50LnBhZ2VYID4gcmlnaHRCb3JkZXIgLSBib3JkZXJXaWR0aCB8fFxuXHRcdFx0XHRcdGV2ZW50LnBhZ2VZIDwgYm90dG9tQm9yZGVyICsgYm9yZGVyV2lkdGggJiYgZXZlbnQucGFnZVkgPiBib3R0b21Cb3JkZXIgLSBib3JkZXJXaWR0aCkge1xuXHRcdFx0XHRcdCRkb2N1bWVudC5vbignbW91c2Vtb3ZlJywgc2l6ZU1vdXNlTW92ZSlcblx0XHRcdFx0XHQkZG9jdW1lbnQub24oJ21vdXNldXAnLCBzaXplTW91c2VVcClcblx0XHRcdFx0fVx0XHRcdFx0XG5cdFx0XHR9KVxuXHRcdFx0ZnVuY3Rpb24gc2l6ZU1vdXNlTW92ZSAoKSB7XG5cdFx0XHRcdHZhciBuZXdIZWlnaHQgPSBldmVudC5wYWdlWSAtIHRvcEJvcmRlclxuXHRcdFx0XHR2YXIgbmV3V2lkdGggPSBldmVudC5wYWdlWCAtIGxlZnRCb3JkZXJcblx0XHRcdFx0Ym90dG9tQm9yZGVyID0gdG9wQm9yZGVyICsgbmV3SGVpZ2h0XG5cdFx0XHRcdHJpZ2h0Qm9yZGVyID0gbGVmdEJvcmRlciArIG5ld1dpZHRoXG5cdFx0XHRcdGVsZW1lbnQuY3NzKHtcblx0XHRcdFx0XHRoZWlnaHQ6IG5ld0hlaWdodCArICdweCcsXG5cdFx0XHRcdFx0d2lkdGg6IG5ld1dpZHRoICsgJ3B4J1xuXHRcdFx0XHR9KVxuXHRcdFx0fVxuXG5cdFx0XHRmdW5jdGlvbiBzaXplTW91c2VVcCAoKSB7XG5cdFx0XHRcdCRkb2N1bWVudC5vZmYoJ21vdXNlbW92ZScsIHNpemVNb3VzZU1vdmUpXG5cdFx0XHRcdCRkb2N1bWVudC5vZmYoJ21vdXNldXAnLCBzaXplTW91c2VVcCk7XG5cdFx0XHR9XG5cblx0XHR9XG5cdH1cbn1dKVxuXG5hcHAuZGlyZWN0aXZlKCdmc2Fjb250YWluZXInLCBbJyRkb2N1bWVudCcsIGZ1bmN0aW9uICgkZG9jdW1lbnQpIHtcblx0cmV0dXJuIHtcblx0XHRsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQsIGF0dHIpIHtcblx0XHRcdHZhciBkYXRhXG5cdFx0XHRlbGVtZW50LmJpbmQoJ2RyYWdvdmVyJywgZnVuY3Rpb24oZSkge1xuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgIFx0fSk7XG5cbiAgICAgICAgIFx0ZWxlbWVudC5iaW5kKCdkcm9wJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICBcdFx0ZGF0YSA9IEpTT04ucGFyc2UoZXZlbnQub3JpZ2luYWxFdmVudC5kYXRhVHJhbnNmZXIuZ2V0RGF0YShcImF1dG9cIikpXG4gICAgICAgICBcdFx0Y29uc29sZS5sb2coZGF0YSlcbiAgICAgICAgIFx0fSlcblx0XHR9XG5cdH1cbn1dKVxuIiwiYXBwLmNvbnRyb2xsZXIoJ0hvbWVDb250cm9sbGVyJywgZnVuY3Rpb24oJHNjb3BlLCAkdGltZW91dCwgJGh0dHApIHtcbiAgXG4gICRzY29wZS5tc2dGcm9tU2NvcGUgPSBcIi4uLkFuZCBJJ20gYSBtZXNzYWdlIGZyb20gdGhlIEhvbWVDb250cm9sbGVyIHNjb3BlLCBqdXN0IHNvIHlvdSBrbm93IHRoYXQgSSB3b3JrIVwiO1xuXG4gICRzY29wZS5saXN0MSA9IFtdO1xuICAkc2NvcGUubGlzdDIgPSBbXTtcbiAgJHNjb3BlLmxpc3QzID0gW107XG4gICRzY29wZS5saXN0NCA9IFtdO1xuICBcbiAgJHNjb3BlLmxpc3Q1ID0gW1xuICAgIHsgJ3RpdGxlJzogJ0l0ZW0gMScsICdkcmFnJzogdHJ1ZSB9LFxuICAgIHsgJ3RpdGxlJzogJ0l0ZW0gMicsICdkcmFnJzogdHJ1ZSB9LFxuICAgIHsgJ3RpdGxlJzogJ0l0ZW0gMycsICdkcmFnJzogdHJ1ZSB9LFxuICAgIHsgJ3RpdGxlJzogJ0l0ZW0gNCcsICdkcmFnJzogdHJ1ZSB9LFxuICAgIHsgJ3RpdGxlJzogJ0l0ZW0gNScsICdkcmFnJzogdHJ1ZSB9LFxuICAgIHsgJ3RpdGxlJzogJ0l0ZW0gNicsICdkcmFnJzogdHJ1ZSB9LFxuICAgIHsgJ3RpdGxlJzogJ0l0ZW0gNycsICdkcmFnJzogdHJ1ZSB9LFxuICAgIHsgJ3RpdGxlJzogJ0l0ZW0gOCcsICdkcmFnJzogdHJ1ZSB9XG4gIF07XG5cbiAgLy8gTGltaXQgaXRlbXMgdG8gYmUgZHJvcHBlZCBpbiBsaXN0MVxuICAkc2NvcGUub3B0aW9uc0xpc3QxID0ge1xuICAgIGFjY2VwdDogZnVuY3Rpb24oZHJhZ0VsKSB7XG4gICAgICBpZiAoJHNjb3BlLmxpc3QxLmxlbmd0aCA+PSAyKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxufSk7IiwiYXBwLmNvbmZpZyhmdW5jdGlvbiAoJHN0YXRlUHJvdmlkZXIpIHtcbiAgICAkc3RhdGVQcm92aWRlci5zdGF0ZSgnaG9tZScsIHtcbiAgICAgICAgdXJsOiAnLycsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnL2FwcC9ob21lL2hvbWUuaHRtbCcsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdIb21lQ29udHJvbGxlcidcbiAgICB9KTtcbn0pOyIsImFwcC5kaXJlY3RpdmUoXCJuYXZiYXJcIiwgZnVuY3Rpb24oKXtcblx0cmV0dXJuIHtcblx0XHRyZXN0cmljdDogXCJFXCIsXG5cdFx0dGVtcGxhdGVVcmw6IFwiL2FwcC9uYXZiYXIvbmF2YmFyLmh0bWxcIlxuXHR9O1xufSk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9