'use strict';

var app = angular.module('Meaniscule', ['ui.router', 'ngDragDrop']);

app.config(function ($urlRouterProvider, $locationProvider) {
   // This turns off hashbang urls (/#about) and changes it to something normal (/about)
   $locationProvider.html5Mode(true);
   // If we go to a URL that ui-router doesn't have registered, go to the "/" url.
   $urlRouterProvider.otherwise('/');
});
'use strict';

app.directive('fsadraggable', ['$document', function ($document) {
	return {
		link: function link(scope, element, attr) {
			var startX = 0,
			    startY = 0,
			    newX = 0,
			    newY = 0;

			var data = attr.fsadraggable;

			var JSONdata = JSON.stringify(data);

			element.css({
				position: 'relative',
				cursor: 'pointer'
			});

			element[0].draggable = true;

			element.bind('dragstart', function (event) {
				startX = event.originalEvent.pageX - newX;
				startY = event.originalEvent.pageY - newY;
				if (data) {
					event.originalEvent.dataTransfer.setData('auto', JSONdata);
				}
			});

			element.bind('drag', function (event) {

				if (event.originalEvent.pageX === 0) {
					// If this isn't here, pageX will reset to 0 upon end of drag
					return;
				}

				newX = event.originalEvent.pageX - startX;
				newY = event.originalEvent.pageY - startY;
			});

			element.bind('dragend', function (event) {

				element.css({
					left: newX + 'px',
					top: newY + 'px'
				});
			});
		}
	};
}]);

app.directive('fsaresizeable', ['$document', function ($document) {
	return {
		link: function link(scope, element, attr) {
			var topBorder, leftBorder, rightBorder, bottomBorder;
			var borderWidth = 10;

			element.css({
				position: 'relative'
			});

			element.on('mousedown', function (event) {
				// event.preventDefault()

				var topBorder = element[0].offsetTop;
				var leftBorder = element[0].offsetLeft;
				var rightBorder = element[0].offsetLeft + element[0].offsetWidth;
				var bottomBorder = element[0].offsetTop + element[0].offsetHeight;

				if (event.pageX < rightBorder + borderWidth && event.pageX > rightBorder - borderWidth || event.pageY < bottomBorder + borderWidth && event.pageY > bottomBorder - borderWidth) {
					$document.on('mousemove', sizeMouseMove);
					$document.on('mouseup', sizeMouseUp);
				}
			});
			function sizeMouseMove() {
				var newHeight = event.pageY - element[0].offsetTop;
				var newWidth = event.pageX - element[0].offsetLeft;

				bottomBorder = event.pageY;
				rightBorder = event.pageX;
				element.css({
					height: newHeight + 'px',
					width: newWidth + 'px'
				});
			}

			function sizeMouseUp() {
				element[0].draggable = true;
				$document.off('mousemove', sizeMouseMove);
				$document.off('mouseup', sizeMouseUp);
			}
		}
	};
}]);

app.directive('fsacontainer', ['$document', function ($document) {
	return {
		link: function link(scope, element, attr) {
			var data;
			attr.fsacontainer = [];
			element.bind('dragover', function (e) {
				e.preventDefault();
			});

			element.bind('drop', function (event) {
				if (event.originalEvent.dataTransfer.getData('auto') === '') {
					return;
				}
				data = JSON.parse(JSON.parse(event.originalEvent.dataTransfer.getData('auto')));
				attr.fsacontainer.push(data);
			});
		}
	};
}]);
// cursor: 'pointer'
'use strict';

app.controller('HomeController', function ($scope, $timeout, $http) {

  $scope.msgFromScope = '...And I\'m a message from the HomeController scope, just so you know that I work!';

  $scope.controllerdata = {
    test: 'test object from home controller'
  };
});

app.controller('secondController', function ($scope, $timeout, $http, $attrs) {

  $scope.logdata = function () {
    console.log('from the second controller', $attrs.fsacontainer);
  };
  var myReceivedData = $attrs.fsacontainer;
});
'use strict';

app.config(function ($stateProvider) {
    $stateProvider.state('home', {
        url: '/',
        templateUrl: '/app/home/home.html',
        controller: 'HomeController'
    });
});
'use strict';

app.controller('ModulesController', function ($scope, $http, ModulesFactory) {

  $scope.$on('$stateChangeSuccess', function () {
    var defaultMessage = 'If you don\'t see a list of links here, you need to seed your database!\nIn your terminal, go to this app\'s directory and run `gulp seedDB`.\nThen try this page again.';

    ModulesFactory.getNodeModules().then(function (modules) {
      $scope.nodeModules = modules;

      if (!$scope.nodeModules.length) {
        $scope.defaultMessage = defaultMessage;
      }
    });
  });
});
'use strict';

app.factory('ModulesFactory', function ($http) {
  return {
    getNodeModules: function getNodeModules() {
      return $http.get('/api/modules/').then(function (res) {
        return res.data;
      });
    }
  };
});
'use strict';

app.config(function ($stateProvider) {
    $stateProvider.state('modules', {
        url: '/modules',
        templateUrl: '/app/modules/modules.html',
        controller: 'ModulesController'
    });
});
"use strict";

app.directive("navbar", function () {
	return {
		restrict: "E",
		templateUrl: "/app/navbar/navbar.html"
	};
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImhvbWUvZHJhZ2RpcmVjdGl2ZS5qcyIsImhvbWUvaG9tZS5jb250cm9sbGVyLmpzIiwiaG9tZS9ob21lLnN0YXRlLmpzIiwibW9kdWxlcy9tb2R1bGVzLmNvbnRyb2xsZXIuanMiLCJtb2R1bGVzL21vZHVsZXMuZmFjdG9yeS5qcyIsIm1vZHVsZXMvbW9kdWxlcy5zdGF0ZS5qcyIsIm5hdmJhci9uYXZiYXIuZGlyZWN0aXZlLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBSSxHQUFHLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQyxZQUFZLEVBQUUsQ0FBQyxXQUFXLEVBQUUsWUFBWSxDQUFDLENBQUMsQ0FBQzs7QUFFcEUsR0FBRyxDQUFDLE1BQU0sQ0FBQyxVQUFVLGtCQUFrQixFQUFFLGlCQUFpQixFQUFFOztBQUV6RCxvQkFBaUIsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUM7O0FBRWxDLHFCQUFrQixDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQztDQUNwQyxDQUFDLENBQUM7OztBQ1BILEdBQUcsQ0FBQyxTQUFTLENBQUMsY0FBYyxFQUFFLENBQUMsV0FBVyxFQUFFLFVBQVUsU0FBUyxFQUFFO0FBQ2hFLFFBQU87QUFDTixNQUFJLEVBQUUsY0FBVSxLQUFLLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRTtBQUNyQyxPQUFJLE1BQU0sR0FBRyxDQUFDO09BQUUsTUFBTSxHQUFHLENBQUM7T0FBRSxJQUFJLEdBQUcsQ0FBQztPQUFFLElBQUksR0FBRyxDQUFDLENBQUE7O0FBRTlDLE9BQUksSUFBSSxHQUFHLElBQUksQ0FBQyxZQUFZLENBQUE7O0FBRTVCLE9BQUksUUFBUSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUE7O0FBRW5DLFVBQU8sQ0FBQyxHQUFHLENBQUM7QUFDWCxZQUFRLEVBQUUsVUFBVTtBQUNwQixVQUFNLEVBQUUsU0FBUztJQUNqQixDQUFDLENBQUE7O0FBRUYs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aXNjdWxlJywgWyd1aS5yb3V0ZXInLCAnbmdEcmFnRHJvcCddKTtcblxuYXBwLmNvbmZpZyhmdW5jdGlvbiAoJHVybFJvdXRlclByb3ZpZGVyLCAkbG9jYXRpb25Qcm92aWRlcikge1xuICAgLy8gVGhpcyB0dXJucyBvZmYgaGFzaGJhbmcgdXJscyAoLyNhYm91dCkgYW5kIGNoYW5nZXMgaXQgdG8gc29tZXRoaW5nIG5vcm1hbCAoL2Fib3V0KVxuICAgJGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKHRydWUpO1xuICAgLy8gSWYgd2UgZ28gdG8gYSBVUkwgdGhhdCB1aS1yb3V0ZXIgZG9lc24ndCBoYXZlIHJlZ2lzdGVyZWQsIGdvIHRvIHRoZSBcIi9cIiB1cmwuXG4gICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKCcvJyk7XG59KTsiLCJhcHAuZGlyZWN0aXZlKCdmc2FkcmFnZ2FibGUnLCBbJyRkb2N1bWVudCcsIGZ1bmN0aW9uICgkZG9jdW1lbnQpIHtcblx0cmV0dXJuIHtcblx0XHRsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQsIGF0dHIpIHtcblx0XHRcdHZhciBzdGFydFggPSAwLCBzdGFydFkgPSAwLCBuZXdYID0gMCwgbmV3WSA9IDBcblxuXHRcdFx0dmFyIGRhdGEgPSBhdHRyLmZzYWRyYWdnYWJsZVxuXG5cdFx0XHR2YXIgSlNPTmRhdGEgPSBKU09OLnN0cmluZ2lmeShkYXRhKVxuXG5cdFx0XHRlbGVtZW50LmNzcyh7XG5cdFx0XHRcdHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuXHRcdFx0XHRjdXJzb3I6ICdwb2ludGVyJ1xuXHRcdFx0fSlcblxuXHRcdFx0ZWxlbWVudFswXS5kcmFnZ2FibGUgPSB0cnVlXG5cblx0XHRcdGVsZW1lbnQuYmluZCgnZHJhZ3N0YXJ0JywgZnVuY3Rpb24gKGV2ZW50KSB7XG5cdFx0XHRcdHN0YXJ0WCA9IGV2ZW50Lm9yaWdpbmFsRXZlbnQucGFnZVggLSBuZXdYXG5cdFx0XHRcdHN0YXJ0WSA9IGV2ZW50Lm9yaWdpbmFsRXZlbnQucGFnZVkgLSBuZXdZXG5cdFx0XHRcdGlmIChkYXRhKSB7XG5cdFx0XHRcdFx0ZXZlbnQub3JpZ2luYWxFdmVudC5kYXRhVHJhbnNmZXIuc2V0RGF0YSgnYXV0bycsIEpTT05kYXRhKVxuXHRcdFx0XHR9XG5cdFx0XHR9KVxuXG5cdFx0XHRlbGVtZW50LmJpbmQoJ2RyYWcnLCBmdW5jdGlvbiAoZXZlbnQpIHtcblxuXHRcdFx0XHRpZiAoZXZlbnQub3JpZ2luYWxFdmVudC5wYWdlWCA9PT0gMCkge1xuXHRcdFx0XHRcdC8vIElmIHRoaXMgaXNuJ3QgaGVyZSwgcGFnZVggd2lsbCByZXNldCB0byAwIHVwb24gZW5kIG9mIGRyYWdcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XHRcdFx0XG5cdFx0XHRcdG5ld1ggPSBldmVudC5vcmlnaW5hbEV2ZW50LnBhZ2VYIC0gc3RhcnRYXG5cdFx0XHRcdG5ld1kgPSBldmVudC5vcmlnaW5hbEV2ZW50LnBhZ2VZIC0gc3RhcnRZXG5cdFx0XHR9KVxuXG5cdFx0XHRlbGVtZW50LmJpbmQoJ2RyYWdlbmQnLCBmdW5jdGlvbiAoZXZlbnQpe1xuXHRcdFx0XHRcblx0XHRcdFx0ZWxlbWVudC5jc3Moe1xuXHRcdFx0XHRcdGxlZnQ6IG5ld1ggKyAncHgnLFxuXHRcdFx0XHRcdHRvcDogbmV3WSArICdweCdcblx0XHRcdFx0fSlcblx0XHRcdH0pXG5cdFx0fVxuXHR9XG59XSlcblxuYXBwLmRpcmVjdGl2ZSgnZnNhcmVzaXplYWJsZScsIFsnJGRvY3VtZW50JywgZnVuY3Rpb24gKCRkb2N1bWVudCkge1xuXHRyZXR1cm4ge1xuXHRcdGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbWVudCwgYXR0cikge1xuXHRcdFx0dmFyIHRvcEJvcmRlciwgbGVmdEJvcmRlciwgcmlnaHRCb3JkZXIsIGJvdHRvbUJvcmRlclxuXHRcdFx0dmFyIGJvcmRlcldpZHRoID0gMTBcblxuXHRcdFx0ZWxlbWVudC5jc3Moe1xuXHRcdFx0XHRwb3NpdGlvbjogJ3JlbGF0aXZlJyxcblx0XHRcdFx0Ly8gY3Vyc29yOiAncG9pbnRlcidcblx0XHRcdH0pXG5cblx0XHRcdGVsZW1lbnQub24oJ21vdXNlZG93bicsIGZ1bmN0aW9uIChldmVudCkge1xuXHRcdFx0XHQvLyBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG5cdFx0XHRcdFxuXHRcdFx0XHR2YXIgdG9wQm9yZGVyID0gZWxlbWVudFswXS5vZmZzZXRUb3Bcblx0XHRcdFx0dmFyIGxlZnRCb3JkZXIgPSBlbGVtZW50WzBdLm9mZnNldExlZnRcblx0XHRcdFx0dmFyIHJpZ2h0Qm9yZGVyID0gZWxlbWVudFswXS5vZmZzZXRMZWZ0ICsgZWxlbWVudFswXS5vZmZzZXRXaWR0aFxuXHRcdFx0XHR2YXIgYm90dG9tQm9yZGVyID0gZWxlbWVudFswXS5vZmZzZXRUb3AgKyBlbGVtZW50WzBdLm9mZnNldEhlaWdodFxuXG5cdFx0XHRcdGlmIChldmVudC5wYWdlWCA8IHJpZ2h0Qm9yZGVyICsgYm9yZGVyV2lkdGggJiYgZXZlbnQucGFnZVggPiByaWdodEJvcmRlciAtIGJvcmRlcldpZHRoIHx8XG5cdFx0XHRcdFx0ZXZlbnQucGFnZVkgPCBib3R0b21Cb3JkZXIgKyBib3JkZXJXaWR0aCAmJiBldmVudC5wYWdlWSA+IGJvdHRvbUJvcmRlciAtIGJvcmRlcldpZHRoKSB7XG5cdFx0XHRcdFx0JGRvY3VtZW50Lm9uKCdtb3VzZW1vdmUnLCBzaXplTW91c2VNb3ZlKVxuXHRcdFx0XHRcdCRkb2N1bWVudC5vbignbW91c2V1cCcsIHNpemVNb3VzZVVwKVxuXHRcdFx0XHR9XHRcdFx0XHRcblx0XHRcdH0pXG5cdFx0XHRmdW5jdGlvbiBzaXplTW91c2VNb3ZlICgpIHtcblx0XHRcdFx0dmFyIG5ld0hlaWdodCA9IGV2ZW50LnBhZ2VZIC0gZWxlbWVudFswXS5vZmZzZXRUb3Bcblx0XHRcdFx0dmFyIG5ld1dpZHRoID0gZXZlbnQucGFnZVggLSBlbGVtZW50WzBdLm9mZnNldExlZnRcblx0XHRcdFx0IFxuXHRcdFx0XHRib3R0b21Cb3JkZXIgPSBldmVudC5wYWdlWVxuXHRcdFx0XHRyaWdodEJvcmRlciA9IGV2ZW50LnBhZ2VYXG5cdFx0XHRcdGVsZW1lbnQuY3NzKHtcblx0XHRcdFx0XHRoZWlnaHQ6IG5ld0hlaWdodCArICdweCcsXG5cdFx0XHRcdFx0d2lkdGg6IG5ld1dpZHRoICsgJ3B4J1xuXHRcdFx0XHR9KVxuXHRcdFx0fVxuXG5cdFx0XHRmdW5jdGlvbiBzaXplTW91c2VVcCAoKSB7XG5cdFx0XHRcdGVsZW1lbnRbMF0uZHJhZ2dhYmxlID0gdHJ1ZVxuXHRcdFx0XHQkZG9jdW1lbnQub2ZmKCdtb3VzZW1vdmUnLCBzaXplTW91c2VNb3ZlKVxuXHRcdFx0XHQkZG9jdW1lbnQub2ZmKCdtb3VzZXVwJywgc2l6ZU1vdXNlVXApO1xuXHRcdFx0fVxuXG5cdFx0fVxuXHR9XG59XSlcblxuYXBwLmRpcmVjdGl2ZSgnZnNhY29udGFpbmVyJywgWyckZG9jdW1lbnQnLCBmdW5jdGlvbiAoJGRvY3VtZW50KSB7XG5cdHJldHVybiB7XG5cdFx0bGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRyKSB7XG5cdFx0XHR2YXIgZGF0YVxuICAgICAgICAgXHRhdHRyLmZzYWNvbnRhaW5lciA9IFtdXG5cdFx0XHRlbGVtZW50LmJpbmQoJ2RyYWdvdmVyJywgZnVuY3Rpb24oZSkge1xuXHRcdFx0XHRlLnByZXZlbnREZWZhdWx0KClcbiAgICAgICAgIFx0fSk7XG5cbiAgICAgICAgIFx0ZWxlbWVudC5iaW5kKCdkcm9wJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICBcdFx0aWYgKGV2ZW50Lm9yaWdpbmFsRXZlbnQuZGF0YVRyYW5zZmVyLmdldERhdGEoXCJhdXRvXCIpID09PSAnJykge1xuICAgICAgICAgXHRcdFx0cmV0dXJuIFxuICAgICAgICAgXHRcdH0gICAgICAgICBcdFx0XG4gICAgICAgICBcdFx0ZGF0YSA9IEpTT04ucGFyc2UoSlNPTi5wYXJzZShldmVudC5vcmlnaW5hbEV2ZW50LmRhdGFUcmFuc2Zlci5nZXREYXRhKFwiYXV0b1wiKSkpXG4gICAgICAgICBcdFx0YXR0ci5mc2Fjb250YWluZXIucHVzaChkYXRhKVxuICAgICAgICAgXHR9KVxuXHRcdH1cblx0fVxufV0pXG4iLCJhcHAuY29udHJvbGxlcignSG9tZUNvbnRyb2xsZXInLCBmdW5jdGlvbigkc2NvcGUsICR0aW1lb3V0LCAkaHR0cCkge1xuICBcbiAgJHNjb3BlLm1zZ0Zyb21TY29wZSA9IFwiLi4uQW5kIEknbSBhIG1lc3NhZ2UgZnJvbSB0aGUgSG9tZUNvbnRyb2xsZXIgc2NvcGUsIGp1c3Qgc28geW91IGtub3cgdGhhdCBJIHdvcmshXCI7XG5cbiAgJHNjb3BlLmNvbnRyb2xsZXJkYXRhID0ge1xuICAgIHRlc3Q6ICd0ZXN0IG9iamVjdCBmcm9tIGhvbWUgY29udHJvbGxlcidcbiAgfVxuXG59KTtcblxuYXBwLmNvbnRyb2xsZXIoJ3NlY29uZENvbnRyb2xsZXInLCBmdW5jdGlvbiAoJHNjb3BlLCAkdGltZW91dCwgJGh0dHAsICRhdHRycykge1xuXG4gICRzY29wZS5sb2dkYXRhID0gZnVuY3Rpb24gKCkge1xuICAgIGNvbnNvbGUubG9nKCdmcm9tIHRoZSBzZWNvbmQgY29udHJvbGxlcicsICRhdHRycy5mc2Fjb250YWluZXIpXG4gIH1cbiAgdmFyIG15UmVjZWl2ZWREYXRhID0gJGF0dHJzLmZzYWNvbnRhaW5lclxuICBcbn0pIiwiYXBwLmNvbmZpZyhmdW5jdGlvbiAoJHN0YXRlUHJvdmlkZXIpIHtcbiAgICAkc3RhdGVQcm92aWRlci5zdGF0ZSgnaG9tZScsIHtcbiAgICAgICAgdXJsOiAnLycsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnL2FwcC9ob21lL2hvbWUuaHRtbCcsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdIb21lQ29udHJvbGxlcidcbiAgICB9KTtcbn0pOyIsImFwcC5jb250cm9sbGVyKCdNb2R1bGVzQ29udHJvbGxlcicsIGZ1bmN0aW9uKCRzY29wZSwgJGh0dHAsIE1vZHVsZXNGYWN0b3J5KSB7XG4gIFxuICAkc2NvcGUuJG9uKCckc3RhdGVDaGFuZ2VTdWNjZXNzJywgZnVuY3Rpb24gKCkge1xuICAgIHZhciBkZWZhdWx0TWVzc2FnZSA9ICdJZiB5b3UgZG9uXFwndCBzZWUgYSBsaXN0IG9mIGxpbmtzIGhlcmUsIHlvdSBuZWVkIHRvIHNlZWQgeW91ciBkYXRhYmFzZSFcXG5JbiB5b3VyIHRlcm1pbmFsLCBnbyB0byB0aGlzIGFwcFxcJ3MgZGlyZWN0b3J5IGFuZCBydW4gYGd1bHAgc2VlZERCYC5cXG5UaGVuIHRyeSB0aGlzIHBhZ2UgYWdhaW4uJztcblxuICAgIE1vZHVsZXNGYWN0b3J5LmdldE5vZGVNb2R1bGVzKClcbiAgICAgIC50aGVuKGZ1bmN0aW9uKG1vZHVsZXMpIHtcbiAgICAgICAgJHNjb3BlLm5vZGVNb2R1bGVzID0gbW9kdWxlcztcbiAgICAgICAgXG4gICAgICAgIGlmICghJHNjb3BlLm5vZGVNb2R1bGVzLmxlbmd0aCkge1xuICAgICAgICAgICRzY29wZS5kZWZhdWx0TWVzc2FnZSA9IGRlZmF1bHRNZXNzYWdlO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgfSk7XG59KTsiLCJhcHAuZmFjdG9yeSgnTW9kdWxlc0ZhY3RvcnknLCBmdW5jdGlvbigkaHR0cCkge1xuICByZXR1cm4ge1xuICAgIGdldE5vZGVNb2R1bGVzOiBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvbW9kdWxlcy8nKVxuICAgICAgICAudGhlbihmdW5jdGlvbihyZXMpIHtcbiAgICAgICAgICByZXR1cm4gcmVzLmRhdGE7XG4gICAgICAgIH0pOyAgICBcbiAgICB9XG4gIH07XG59KTsiLCJhcHAuY29uZmlnKGZ1bmN0aW9uICgkc3RhdGVQcm92aWRlcikge1xuICAgICRzdGF0ZVByb3ZpZGVyLnN0YXRlKCdtb2R1bGVzJywge1xuICAgICAgICB1cmw6ICcvbW9kdWxlcycsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnL2FwcC9tb2R1bGVzL21vZHVsZXMuaHRtbCcsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdNb2R1bGVzQ29udHJvbGxlcidcbiAgICB9KTtcbn0pOyIsImFwcC5kaXJlY3RpdmUoXCJuYXZiYXJcIiwgZnVuY3Rpb24oKXtcblx0cmV0dXJuIHtcblx0XHRyZXN0cmljdDogXCJFXCIsXG5cdFx0dGVtcGxhdGVVcmw6IFwiL2FwcC9uYXZiYXIvbmF2YmFyLmh0bWxcIlxuXHR9O1xufSk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9