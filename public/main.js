'use strict';

var app = angular.module('Meaniscule', ['ui.router', 'ngDragDrop']);

app.config(function ($urlRouterProvider, $locationProvider) {
   // This turns off hashbang urls (/#about) and changes it to something normal (/about)
   $locationProvider.html5Mode(true);
   // If we go to a URL that ui-router doesn't have registered, go to the "/" url.
   $urlRouterProvider.otherwise('/');
});
'use strict';

app.directive('fsadraggable', function ($document) {

	return {
		restrict: 'A',
		link: function link(scope, element, attr) {
			var startX = 0,
			    startY = 0,
			    newX = 0,
			    newY = 0;

			var data = attr.fsadata;
			console.log(data);

			var JSONdata = JSON.stringify(data);

			element.css({
				position: 'relative',
				cursor: 'pointer'
			});

			element[0].draggable = true;

			element.bind('dragstart', function (event) {
				startX = event.originalEvent.pageX - newX;
				startY = event.originalEvent.pageY - newY;
				if (data) {
					event.originalEvent.dataTransfer.setData('auto', JSONdata);
				}
			});

			element.bind('drag', function (event) {

				if (event.originalEvent.pageX === 0) {
					// If this isn't here, pageX will reset to 0 upon end of drag
					return;
				}

				newX = event.originalEvent.pageX - startX;
				newY = event.originalEvent.pageY - startY;
			});

			element.bind('dragend', function (event) {

				element.css({
					left: newX + 'px',
					top: newY + 'px'
				});
			});
		},
		scope: {
			fsadata: '@'
		}
	};
});

app.directive('fsaresizeable', ['$document', function ($document) {
	return {
		link: function link(scope, element, attr) {
			var topBorder, leftBorder, rightBorder, bottomBorder;
			var borderWidth = 10;

			element.css({
				position: 'relative'
			});

			element.on('mousedown', function (event) {
				// event.preventDefault()

				var topBorder = element[0].offsetTop;
				var leftBorder = element[0].offsetLeft;
				var rightBorder = element[0].offsetLeft + element[0].offsetWidth;
				var bottomBorder = element[0].offsetTop + element[0].offsetHeight;

				if (event.pageX < rightBorder + borderWidth && event.pageX > rightBorder - borderWidth || event.pageY < bottomBorder + borderWidth && event.pageY > bottomBorder - borderWidth) {
					$document.on('mousemove', sizeMouseMove);
					$document.on('mouseup', sizeMouseUp);
				}
			});
			function sizeMouseMove() {
				var newHeight = event.pageY - element[0].offsetTop;
				var newWidth = event.pageX - element[0].offsetLeft;

				bottomBorder = event.pageY;
				rightBorder = event.pageX;
				element.css({
					height: newHeight + 'px',
					width: newWidth + 'px'
				});
			}

			function sizeMouseUp() {
				element[0].draggable = true;
				$document.off('mousemove', sizeMouseMove);
				$document.off('mouseup', sizeMouseUp);
			}
		}
	};
}]);

app.directive('fsacontainer', ['$document', function ($document) {
	return {
		link: function link(scope, element, attr) {
			var data;
			attr.fsacontainer = [];
			element.bind('dragover', function (e) {
				e.preventDefault();
			});

			element.bind('drop', function (event) {
				if (event.originalEvent.dataTransfer.getData('auto') === '') {
					return;
				}
				data = JSON.parse(JSON.parse(event.originalEvent.dataTransfer.getData('auto')));
				console.log(data);
				attr.fsacontainer.push(data);
			});
		}
	};
}]);
// cursor: 'pointer'
'use strict';

app.controller('HomeController', function ($scope, $timeout, $http) {

  $scope.msgFromScope = '...And I\'m a message from the HomeController scope, just so you know that I work!';

  $scope.controllerdata = {
    test: 'test object from home controller'
  };
});

app.controller('secondController', function ($scope, $timeout, $http, $attrs) {

  $scope.logdata = function () {
    console.log('from the second controller', $attrs.fsacontainer);
  };
  var myReceivedData = $attrs.fsacontainer;
});
'use strict';

app.config(function ($stateProvider) {
    $stateProvider.state('home', {
        url: '/',
        templateUrl: '/app/home/home.html',
        controller: 'HomeController'
    });
});
'use strict';

app.controller('ModulesController', function ($scope, $http, ModulesFactory) {

  $scope.$on('$stateChangeSuccess', function () {
    var defaultMessage = 'If you don\'t see a list of links here, you need to seed your database!\nIn your terminal, go to this app\'s directory and run `gulp seedDB`.\nThen try this page again.';

    ModulesFactory.getNodeModules().then(function (modules) {
      $scope.nodeModules = modules;

      if (!$scope.nodeModules.length) {
        $scope.defaultMessage = defaultMessage;
      }
    });
  });
});
'use strict';

app.factory('ModulesFactory', function ($http) {
  return {
    getNodeModules: function getNodeModules() {
      return $http.get('/api/modules/').then(function (res) {
        return res.data;
      });
    }
  };
});
'use strict';

app.config(function ($stateProvider) {
    $stateProvider.state('modules', {
        url: '/modules',
        templateUrl: '/app/modules/modules.html',
        controller: 'ModulesController'
    });
});
"use strict";

app.directive("navbar", function () {
	return {
		restrict: "E",
		templateUrl: "/app/navbar/navbar.html"
	};
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImhvbWUvZHJhZ2RpcmVjdGl2ZS5qcyIsImhvbWUvaG9tZS5jb250cm9sbGVyLmpzIiwiaG9tZS9ob21lLnN0YXRlLmpzIiwibW9kdWxlcy9tb2R1bGVzLmNvbnRyb2xsZXIuanMiLCJtb2R1bGVzL21vZHVsZXMuZmFjdG9yeS5qcyIsIm1vZHVsZXMvbW9kdWxlcy5zdGF0ZS5qcyIsIm5hdmJhci9uYXZiYXIuZGlyZWN0aXZlLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBSSxHQUFHLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQyxZQUFZLEVBQUUsQ0FBQyxXQUFXLEVBQUUsWUFBWSxDQUFDLENBQUMsQ0FBQzs7QUFFcEUsR0FBRyxDQUFDLE1BQU0sQ0FBQyxVQUFVLGtCQUFrQixFQUFFLGlCQUFpQixFQUFFOztBQUV6RCxvQkFBaUIsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUM7O0FBRWxDLHFCQUFrQixDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsQ0FBQztDQUNwQyxDQUFDLENBQUM7OztBQ1BILEdBQUcsQ0FBQyxTQUFTLENBQUMsY0FBYyxFQUFFLFVBQVUsU0FBUyxFQUFFOztBQUVsRCxRQUFPO0FBQ04sVUFBUSxFQUFFLEdBQUc7QUFDYixNQUFJLEVBQUUsY0FBVSxLQUFLLEVBQUUsT0FBTyxFQUFFLElBQUksRUFBRTtBQUNyQyxPQUFJLE1BQU0sR0FBRyxDQUFDO09BQUUsTUFBTSxHQUFHLENBQUM7T0FBRSxJQUFJLEdBQUcsQ0FBQztPQUFFLElBQUksR0FBRyxDQUFDLENBQUE7O0FBRTlDLE9BQUksSUFBSSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUE7QUFDdkIsVUFBTyxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsQ0FBQTs7QUFFakIsT0FBSSxRQUFRLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQTs7QUFFbkMsVUFBTyxDQUFDLEdBQUcsQ0FBQztBQUNYLFlBQVEsRUFBRSxV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QUUsR0FBRztBQUNiLGFBQVcsRUFBRSx5QkFBeUI7RUFDdEMsQ0FBQztDQUNGLENBQUMsQ0FBQyIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdNZWFuaXNjdWxlJywgWyd1aS5yb3V0ZXInLCAnbmdEcmFnRHJvcCddKTtcblxuYXBwLmNvbmZpZyhmdW5jdGlvbiAoJHVybFJvdXRlclByb3ZpZGVyLCAkbG9jYXRpb25Qcm92aWRlcikge1xuICAgLy8gVGhpcyB0dXJucyBvZmYgaGFzaGJhbmcgdXJscyAoLyNhYm91dCkgYW5kIGNoYW5nZXMgaXQgdG8gc29tZXRoaW5nIG5vcm1hbCAoL2Fib3V0KVxuICAgJGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKHRydWUpO1xuICAgLy8gSWYgd2UgZ28gdG8gYSBVUkwgdGhhdCB1aS1yb3V0ZXIgZG9lc24ndCBoYXZlIHJlZ2lzdGVyZWQsIGdvIHRvIHRoZSBcIi9cIiB1cmwuXG4gICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKCcvJyk7XG59KTsiLCJhcHAuZGlyZWN0aXZlKCdmc2FkcmFnZ2FibGUnLCBmdW5jdGlvbiAoJGRvY3VtZW50KSB7XG5cblx0cmV0dXJuIHtcblx0XHRyZXN0cmljdDogJ0EnLFxuXHRcdGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWxlbWVudCwgYXR0cikge1xuXHRcdFx0dmFyIHN0YXJ0WCA9IDAsIHN0YXJ0WSA9IDAsIG5ld1ggPSAwLCBuZXdZID0gMFxuXG5cdFx0XHR2YXIgZGF0YSA9IGF0dHIuZnNhZGF0YVxuXHRcdFx0Y29uc29sZS5sb2coZGF0YSlcblxuXHRcdFx0dmFyIEpTT05kYXRhID0gSlNPTi5zdHJpbmdpZnkoZGF0YSlcblxuXHRcdFx0ZWxlbWVudC5jc3Moe1xuXHRcdFx0XHRwb3NpdGlvbjogJ3JlbGF0aXZlJyxcblx0XHRcdFx0Y3Vyc29yOiAncG9pbnRlcidcblx0XHRcdH0pXG5cblx0XHRcdGVsZW1lbnRbMF0uZHJhZ2dhYmxlID0gdHJ1ZVxuXG5cdFx0XHRlbGVtZW50LmJpbmQoJ2RyYWdzdGFydCcsIGZ1bmN0aW9uIChldmVudCkge1xuXHRcdFx0XHRzdGFydFggPSBldmVudC5vcmlnaW5hbEV2ZW50LnBhZ2VYIC0gbmV3WFxuXHRcdFx0XHRzdGFydFkgPSBldmVudC5vcmlnaW5hbEV2ZW50LnBhZ2VZIC0gbmV3WVxuXHRcdFx0XHRpZiAoZGF0YSkge1xuXHRcdFx0XHRcdGV2ZW50Lm9yaWdpbmFsRXZlbnQuZGF0YVRyYW5zZmVyLnNldERhdGEoJ2F1dG8nLCBKU09OZGF0YSlcblx0XHRcdFx0fVxuXHRcdFx0fSlcblxuXHRcdFx0ZWxlbWVudC5iaW5kKCdkcmFnJywgZnVuY3Rpb24gKGV2ZW50KSB7XG5cblx0XHRcdFx0aWYgKGV2ZW50Lm9yaWdpbmFsRXZlbnQucGFnZVggPT09IDApIHtcblx0XHRcdFx0XHQvLyBJZiB0aGlzIGlzbid0IGhlcmUsIHBhZ2VYIHdpbGwgcmVzZXQgdG8gMCB1cG9uIGVuZCBvZiBkcmFnXG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHRcdFxuXHRcdFx0XHRuZXdYID0gZXZlbnQub3JpZ2luYWxFdmVudC5wYWdlWCAtIHN0YXJ0WFxuXHRcdFx0XHRuZXdZID0gZXZlbnQub3JpZ2luYWxFdmVudC5wYWdlWSAtIHN0YXJ0WVxuXHRcdFx0fSlcblxuXHRcdFx0ZWxlbWVudC5iaW5kKCdkcmFnZW5kJywgZnVuY3Rpb24gKGV2ZW50KXtcblx0XHRcdFx0XG5cdFx0XHRcdGVsZW1lbnQuY3NzKHtcblx0XHRcdFx0XHRsZWZ0OiBuZXdYICsgJ3B4Jyxcblx0XHRcdFx0XHR0b3A6IG5ld1kgKyAncHgnXG5cdFx0XHRcdH0pXG5cdFx0XHR9KVxuXHRcdH0sXG5cdFx0c2NvcGU6IHtcblx0XHRcdGZzYWRhdGE6ICdAJ1xuXHRcdH1cblx0fVxuXG59KVxuXG5hcHAuZGlyZWN0aXZlKCdmc2FyZXNpemVhYmxlJywgWyckZG9jdW1lbnQnLCBmdW5jdGlvbiAoJGRvY3VtZW50KSB7XG5cdHJldHVybiB7XG5cdFx0bGluazogZnVuY3Rpb24gKHNjb3BlLCBlbGVtZW50LCBhdHRyKSB7XG5cdFx0XHR2YXIgdG9wQm9yZGVyLCBsZWZ0Qm9yZGVyLCByaWdodEJvcmRlciwgYm90dG9tQm9yZGVyXG5cdFx0XHR2YXIgYm9yZGVyV2lkdGggPSAxMFxuXG5cdFx0XHRlbGVtZW50LmNzcyh7XG5cdFx0XHRcdHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuXHRcdFx0XHQvLyBjdXJzb3I6ICdwb2ludGVyJ1xuXHRcdFx0fSlcblxuXHRcdFx0ZWxlbWVudC5vbignbW91c2Vkb3duJywgZnVuY3Rpb24gKGV2ZW50KSB7XG5cdFx0XHRcdC8vIGV2ZW50LnByZXZlbnREZWZhdWx0KClcblx0XHRcdFx0XG5cdFx0XHRcdHZhciB0b3BCb3JkZXIgPSBlbGVtZW50WzBdLm9mZnNldFRvcFxuXHRcdFx0XHR2YXIgbGVmdEJvcmRlciA9IGVsZW1lbnRbMF0ub2Zmc2V0TGVmdFxuXHRcdFx0XHR2YXIgcmlnaHRCb3JkZXIgPSBlbGVtZW50WzBdLm9mZnNldExlZnQgKyBlbGVtZW50WzBdLm9mZnNldFdpZHRoXG5cdFx0XHRcdHZhciBib3R0b21Cb3JkZXIgPSBlbGVtZW50WzBdLm9mZnNldFRvcCArIGVsZW1lbnRbMF0ub2Zmc2V0SGVpZ2h0XG5cblx0XHRcdFx0aWYgKGV2ZW50LnBhZ2VYIDwgcmlnaHRCb3JkZXIgKyBib3JkZXJXaWR0aCAmJiBldmVudC5wYWdlWCA+IHJpZ2h0Qm9yZGVyIC0gYm9yZGVyV2lkdGggfHxcblx0XHRcdFx0XHRldmVudC5wYWdlWSA8IGJvdHRvbUJvcmRlciArIGJvcmRlcldpZHRoICYmIGV2ZW50LnBhZ2VZID4gYm90dG9tQm9yZGVyIC0gYm9yZGVyV2lkdGgpIHtcblx0XHRcdFx0XHQkZG9jdW1lbnQub24oJ21vdXNlbW92ZScsIHNpemVNb3VzZU1vdmUpXG5cdFx0XHRcdFx0JGRvY3VtZW50Lm9uKCdtb3VzZXVwJywgc2l6ZU1vdXNlVXApXG5cdFx0XHRcdH1cdFx0XHRcdFxuXHRcdFx0fSlcblx0XHRcdGZ1bmN0aW9uIHNpemVNb3VzZU1vdmUgKCkge1xuXHRcdFx0XHR2YXIgbmV3SGVpZ2h0ID0gZXZlbnQucGFnZVkgLSBlbGVtZW50WzBdLm9mZnNldFRvcFxuXHRcdFx0XHR2YXIgbmV3V2lkdGggPSBldmVudC5wYWdlWCAtIGVsZW1lbnRbMF0ub2Zmc2V0TGVmdFxuXHRcdFx0XHQgXG5cdFx0XHRcdGJvdHRvbUJvcmRlciA9IGV2ZW50LnBhZ2VZXG5cdFx0XHRcdHJpZ2h0Qm9yZGVyID0gZXZlbnQucGFnZVhcblx0XHRcdFx0ZWxlbWVudC5jc3Moe1xuXHRcdFx0XHRcdGhlaWdodDogbmV3SGVpZ2h0ICsgJ3B4Jyxcblx0XHRcdFx0XHR3aWR0aDogbmV3V2lkdGggKyAncHgnXG5cdFx0XHRcdH0pXG5cdFx0XHR9XG5cblx0XHRcdGZ1bmN0aW9uIHNpemVNb3VzZVVwICgpIHtcblx0XHRcdFx0ZWxlbWVudFswXS5kcmFnZ2FibGUgPSB0cnVlXG5cdFx0XHRcdCRkb2N1bWVudC5vZmYoJ21vdXNlbW92ZScsIHNpemVNb3VzZU1vdmUpXG5cdFx0XHRcdCRkb2N1bWVudC5vZmYoJ21vdXNldXAnLCBzaXplTW91c2VVcCk7XG5cdFx0XHR9XG5cblx0XHR9XG5cdH1cbn1dKVxuXG5hcHAuZGlyZWN0aXZlKCdmc2Fjb250YWluZXInLCBbJyRkb2N1bWVudCcsIGZ1bmN0aW9uICgkZG9jdW1lbnQpIHtcblx0cmV0dXJuIHtcblx0XHRsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsZW1lbnQsIGF0dHIpIHtcblx0XHRcdHZhciBkYXRhXG4gICAgICAgICBcdGF0dHIuZnNhY29udGFpbmVyID0gW11cblx0XHRcdGVsZW1lbnQuYmluZCgnZHJhZ292ZXInLCBmdW5jdGlvbihlKSB7XG5cdFx0XHRcdGUucHJldmVudERlZmF1bHQoKVxuICAgICAgICAgXHR9KTtcblxuICAgICAgICAgXHRlbGVtZW50LmJpbmQoJ2Ryb3AnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgIFx0XHRpZiAoZXZlbnQub3JpZ2luYWxFdmVudC5kYXRhVHJhbnNmZXIuZ2V0RGF0YShcImF1dG9cIikgPT09ICcnKSB7XG4gICAgICAgICBcdFx0XHRyZXR1cm4gXG4gICAgICAgICBcdFx0fSAgICAgICAgIFx0XHRcbiAgICAgICAgIFx0XHRkYXRhID0gSlNPTi5wYXJzZShKU09OLnBhcnNlKGV2ZW50Lm9yaWdpbmFsRXZlbnQuZGF0YVRyYW5zZmVyLmdldERhdGEoXCJhdXRvXCIpKSlcbiAgICAgICAgIFx0XHRjb25zb2xlLmxvZyhkYXRhKVxuICAgICAgICAgXHRcdGF0dHIuZnNhY29udGFpbmVyLnB1c2goZGF0YSlcbiAgICAgICAgIFx0fSlcblx0XHR9XG5cdH1cbn1dKVxuIiwiYXBwLmNvbnRyb2xsZXIoJ0hvbWVDb250cm9sbGVyJywgZnVuY3Rpb24oJHNjb3BlLCAkdGltZW91dCwgJGh0dHApIHtcbiAgXG4gICRzY29wZS5tc2dGcm9tU2NvcGUgPSBcIi4uLkFuZCBJJ20gYSBtZXNzYWdlIGZyb20gdGhlIEhvbWVDb250cm9sbGVyIHNjb3BlLCBqdXN0IHNvIHlvdSBrbm93IHRoYXQgSSB3b3JrIVwiO1xuXG4gICRzY29wZS5jb250cm9sbGVyZGF0YSA9IHtcbiAgICB0ZXN0OiAndGVzdCBvYmplY3QgZnJvbSBob21lIGNvbnRyb2xsZXInXG4gIH1cblxufSk7XG5cbmFwcC5jb250cm9sbGVyKCdzZWNvbmRDb250cm9sbGVyJywgZnVuY3Rpb24gKCRzY29wZSwgJHRpbWVvdXQsICRodHRwLCAkYXR0cnMpIHtcblxuICAkc2NvcGUubG9nZGF0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICBjb25zb2xlLmxvZygnZnJvbSB0aGUgc2Vjb25kIGNvbnRyb2xsZXInLCAkYXR0cnMuZnNhY29udGFpbmVyKVxuICB9XG4gIHZhciBteVJlY2VpdmVkRGF0YSA9ICRhdHRycy5mc2Fjb250YWluZXJcbiAgXG59KSIsImFwcC5jb25maWcoZnVuY3Rpb24gKCRzdGF0ZVByb3ZpZGVyKSB7XG4gICAgJHN0YXRlUHJvdmlkZXIuc3RhdGUoJ2hvbWUnLCB7XG4gICAgICAgIHVybDogJy8nLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJy9hcHAvaG9tZS9ob21lLmh0bWwnLFxuICAgICAgICBjb250cm9sbGVyOiAnSG9tZUNvbnRyb2xsZXInXG4gICAgfSk7XG59KTsiLCJhcHAuY29udHJvbGxlcignTW9kdWxlc0NvbnRyb2xsZXInLCBmdW5jdGlvbigkc2NvcGUsICRodHRwLCBNb2R1bGVzRmFjdG9yeSkge1xuICBcbiAgJHNjb3BlLiRvbignJHN0YXRlQ2hhbmdlU3VjY2VzcycsIGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZGVmYXVsdE1lc3NhZ2UgPSAnSWYgeW91IGRvblxcJ3Qgc2VlIGEgbGlzdCBvZiBsaW5rcyBoZXJlLCB5b3UgbmVlZCB0byBzZWVkIHlvdXIgZGF0YWJhc2UhXFxuSW4geW91ciB0ZXJtaW5hbCwgZ28gdG8gdGhpcyBhcHBcXCdzIGRpcmVjdG9yeSBhbmQgcnVuIGBndWxwIHNlZWREQmAuXFxuVGhlbiB0cnkgdGhpcyBwYWdlIGFnYWluLic7XG5cbiAgICBNb2R1bGVzRmFjdG9yeS5nZXROb2RlTW9kdWxlcygpXG4gICAgICAudGhlbihmdW5jdGlvbihtb2R1bGVzKSB7XG4gICAgICAgICRzY29wZS5ub2RlTW9kdWxlcyA9IG1vZHVsZXM7XG4gICAgICAgIFxuICAgICAgICBpZiAoISRzY29wZS5ub2RlTW9kdWxlcy5sZW5ndGgpIHtcbiAgICAgICAgICAkc2NvcGUuZGVmYXVsdE1lc3NhZ2UgPSBkZWZhdWx0TWVzc2FnZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH0pO1xufSk7IiwiYXBwLmZhY3RvcnkoJ01vZHVsZXNGYWN0b3J5JywgZnVuY3Rpb24oJGh0dHApIHtcbiAgcmV0dXJuIHtcbiAgICBnZXROb2RlTW9kdWxlczogZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL21vZHVsZXMvJylcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5kYXRhO1xuICAgICAgICB9KTsgICAgXG4gICAgfVxuICB9O1xufSk7IiwiYXBwLmNvbmZpZyhmdW5jdGlvbiAoJHN0YXRlUHJvdmlkZXIpIHtcbiAgICAkc3RhdGVQcm92aWRlci5zdGF0ZSgnbW9kdWxlcycsIHtcbiAgICAgICAgdXJsOiAnL21vZHVsZXMnLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJy9hcHAvbW9kdWxlcy9tb2R1bGVzLmh0bWwnLFxuICAgICAgICBjb250cm9sbGVyOiAnTW9kdWxlc0NvbnRyb2xsZXInXG4gICAgfSk7XG59KTsiLCJhcHAuZGlyZWN0aXZlKFwibmF2YmFyXCIsIGZ1bmN0aW9uKCl7XG5cdHJldHVybiB7XG5cdFx0cmVzdHJpY3Q6IFwiRVwiLFxuXHRcdHRlbXBsYXRlVXJsOiBcIi9hcHAvbmF2YmFyL25hdmJhci5odG1sXCJcblx0fTtcbn0pOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==